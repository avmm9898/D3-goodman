<head>
    <meta charset="UTF-8">
    <script src="https://d3js.org/d3.v4.min.js"></script>
    <title>台灣潮汐預測 新北貢寮</title>
</head>

<body>
    <script type="text/javascript">
       
    var width = 1024;
    var height = 768;
    var ctrl = d3.select("body").append("svg").attr("width", width).attr("height", height);
    d3.csv("./tides.csv", 
	    function(data)
	    {
		   
		    console.log(data);
            var maxx = d3.max(data, function(d){ return d.Time;});
		    var maxy = d3.max(data, function(d){ return d.h;});
            var miny = d3.min(data, function(d){ return Math.abs(d.h); });
            var Y_all = maxy+miny;
		    var lines = d3.line()
                        .x(function(d){return d.Time*width/maxx;})
                        .y(function(d){return height-d.Time*(height/Y_all)});
		    
            ctrl.append("path")
            .data([data])
            .attr("d", lines)
            .attr("stroke", "red")
            .attr("fill", "none");
	    }
    );
    </script>
</body>